---
- hosts: monitoring
  become: yes
  become_user: root
  become_method: sudo
  roles:
    - alertmanager

- hosts: nodes
  become: yes
  become_user: root
  become_method: sudo
  roles:
    - prometheus_node_exporter

- hosts: monitoring
  become: yes
  become_user: root
  become_method: sudo
  roles:
    - prometheus_node_exporter

- hosts: monitoring
  become: yes
  become_user: root
  become_method: sudo
  roles:
    - prometheus

- hosts: monitoring
  become: yes
  become_user: root
  become_method: sudo
  roles:
    - grafana

- hosts: monitoring
  become: yes
  become_user: root
  become_method: sudo
  tasks:
    - name: Debug node_exporter variable
      debug:
        var: node_exporter
